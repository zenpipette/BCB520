{
  "hash": "5cdde703bd8d31c70431a90af64458be",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Assignment 4\"\nsubtitle: \"Marks and Channels\"\nauthor: \"Sharon\"\ndate: \"2025-02-13\"\nformat: html\ncategories: [Assignment, DataViz]\nimage: Dwight.jpg\ncode-fold: true\ncode-tools: true\ndescrption: \"fecal data gone wrong\"\n---\n\n\n# Assignment 4\n\nSome good and some bad plots.\n\n# Packages\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(Hmisc)\nlibrary(corrplot)\n```\n:::\n\n\n\n# Load RDS objects\n\n\n::: {.cell}\n\n```{.r .cell-code}\nIF_top30 <- readRDS(\"IF_top30.rds\")\nIF_top30[1:12,1:4] -> IF_top30\nIF_top30\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     Bacteroides Escherichia.Shigella Veillonella Clostridium.sensu.stricto\nA003  0.23493134            24.673455    6.669314                 8.2969238\nA005  4.02761085            20.209191   11.172658                 6.0197771\nA007  0.19334102             4.074306   24.975276                 0.6596882\nA009  0.02770472            57.396700    0.141698                11.1079596\nA011  9.26831811             4.852270   18.251579                 0.0529379\nA013  0.25171539            14.938691   25.188360                 2.9026206\nA015 40.65170057            13.094584    2.053467                 0.1528290\nA017 29.87910938             4.391378    5.191063                 0.3075670\nA019 44.56634097             7.588656    5.023680                 0.1064486\nA021 40.75502674             1.106360    4.905019                 3.9529656\nA025 34.51478583             1.733203    3.560540                 0.0000000\nA027  1.02156002             6.573110   28.744404                24.6382943\n```\n\n\n:::\n:::\n\n\n# Modify the data table\n\n\n::: {.cell}\n\n```{.r .cell-code}\nIF_top30 <- IF_top30 |> rownames_to_column(var=\"Subject\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nIF_top30 |> pivot_longer(\n  cols=-Subject,\n  names_to=\"Bacteria\",\n  values_to=\"Abundance\") -> IF_top30\n```\n:::\n\n\n# Expressiveness and Effectiveness\n\n## Figure 1\n\n4 different color hues effectively separate the type of bacterial genera.\n\nThe length of the bar clearly shows the relative amounts of each genera.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ng1 <- ggplot(IF_top30, aes(x= Subject, y= Abundance, fill=Bacteria)) +\n  geom_bar(stat=\"identity\") +\n  labs(title=\"Figure 1: Top 4 baby poop bacterial genera in 12 healthy infants\",\n       x=\"Subject\",\n       y=\"Relative Abundance\")+\n  theme_bw()\n\ng1\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n## Figure 2\n\n\n::: {.cell}\n\n```{.r .cell-code}\nInfant_Fecal_Relabund <- readRDS(\"Infant_Fecal_Relabund.rds\")\n\nInfant_Fecal_Relabund <- Infant_Fecal_Relabund |> rownames_to_column(var=\"Subject\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nInfant_Fecal_Relabund[1:8,1:30] -> Infant_Fecal_Relabund\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nInfant_Fecal_Relabund |> pivot_longer(\n  cols=-Subject,\n  names_to=\"Bacteria\",\n  values_to=\"Abundance\") -> Infant_Fecal_Relabund\n```\n:::\n\n\nFigure 2 contains a lot more data, but many of these bacterial relative abundances are zero and the tallest line is the Unclassified genera. \n\n\"The importance of the attribute should match the salience of the channel\"- in this case the large unclassified block and the inclusion of far too many genera impact the effectiveness of this plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ng2 <- ggplot(Infant_Fecal_Relabund, aes(x= Subject, y= Abundance, fill=Bacteria)) +\n  geom_bar(stat=\"identity\") +\n  labs(title=\"Figure 2: Baby poop bacterial genera across time for one subject\",\n       x=\"Subject\",\n       y=\"Relative Abundance\")+\n  theme_bw()\n\ng2\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n# Separability\n\n## Figure 5\n\nI think we can clearly distinguish both stronger and weaker correlations, and also the direction of correlation. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nIF_top30_fresh <- readRDS(\"IF_top30.rds\")\nIF_IF_rcorr <- rcorr(as.matrix(IF_top30_fresh[1:20,1:20]), type=c(\"spearman\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncorrplot(IF_IF_rcorr$r, p.mat=IF_IF_rcorr$P, sig.level=c(0.01,0.05), \n         insig='label_sig', pch.col='black', pch.cex=0.7,\n         method=c(\"circle\"), tl.cex=0.5, order=\"AOE\", type=\"lower\", diag = F)\nmtext(\"Infant Fecal Microbiome Correlation with AOE Cluster (6 mo avg)\", line =3)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n## Figure 6\n\nI think that the little triangles of light blue and light orange cannot be distinguished. This plot also contains redundant data (upper and lower triangle) which makes it hard to know what is actually important.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nIF_IF_rcorr2 <- rcorr(as.matrix(IF_top30_fresh[1:20,1:20]), type=c(\"spearman\"))\n\ncorrplot(IF_IF_rcorr2$r, pch.col='black', pch.cex=0.7,\n         method=c(\"pie\"), tl.cex=0.5)\nmtext(\"Figure 6 - messy shapes that can barely be distinguished\", line =3)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n## Extra\n\nI think the ellipses are terrible.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncorrplot(IF_IF_rcorr2$r, pch.col='black', pch.cex=0.7,\n         method=c(\"ellipse\"), tl.cex=0.5)\nmtext(\"Extra: ellipses\", line =3)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}